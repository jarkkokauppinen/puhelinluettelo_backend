{"version":3,"sources":["Filter.js","services/persons.js","PersonForm.js","Persons.js","App.js","index.js"],"names":["Filter","props","value","onChange","baseUrl","axios","get","newPerson","post","id","put","delete","PersonForm","update","updatePerson","window","confirm","newName","personService","then","response","setPersons","persons","map","person","data","setNewName","setNumber","setSuccess","setMessage","setTimeout","catch","error","onSubmit","event","preventDefault","name","number","add","concat","console","message","changeName","changeNumber","type","Persons","namesToShow","showAll","filter","toLowerCase","includes","onClick","Notification","success","className","App","useState","setShowAll","setFilter","useEffect","log","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.69d4d2a8.chunk.js","sourcesContent":["const Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with:\r\n      <input\r\n      value={props.value}\r\n      onChange={props.onChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n//const baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newPerson => {\r\n  return axios.post(baseUrl, newPerson)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  return axios.put(`${baseUrl}/${id}`, newPerson)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import personService from './services/persons'\r\n\r\nconst PersonForm = (props) => {\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const newPerson = {name: props.newName, number: props.number}\r\n    let add = true\r\n    \r\n    for (const person of props.persons) {\r\n      if (props.newName === person.name) {\r\n        add = false\r\n        const id = person.id\r\n        update(newPerson, id)\r\n      }\r\n    }\r\n    \r\n    if (add) {\r\n      personService\r\n        .create(newPerson)\r\n        .then(response => {\r\n          props.setPersons(props.persons.concat(response.data))\r\n          props.setNewName('')\r\n          props.setNumber('')\r\n          props.setSuccess(true)\r\n          props.setMessage(`Added ${props.newName}`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        })\r\n        .catch(error => {\r\n          //console.log(error)\r\n          console.error(error.message)\r\n        })\r\n    }\r\n  }\r\n\r\n  const update = (updatePerson, id) => {\r\n    if (window.confirm(`${props.newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n      personService\r\n        .update(id, updatePerson)\r\n        .then(response => {\r\n          props.setPersons(props.persons.map(person =>\r\n            person.id !== id ? person : response.data))\r\n          props.setNewName('')\r\n          props.setNumber('')\r\n          props.setSuccess(true)\r\n          props.setMessage(`Updated ${props.newName}`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        })\r\n        .catch(error => {\r\n          props.setSuccess(false)\r\n          props.setMessage(`Information of ${props.newName} has already been removed from server`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 5500)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name:\r\n          <input value={props.newName} \r\n          onChange={props.changeName} />\r\n          <br />\r\n          number:\r\n          <input value={props.number}\r\n          onChange={props.changeNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import personService from './services/persons'\r\n\r\nconst Persons = (props) => {\r\n\r\n  const namesToShow = props.showAll\r\n  ? props.persons\r\n  : props.persons.filter(person =>\r\n    person.name.toLowerCase().includes(props.filter.toLowerCase()))\r\n\r\n  const deletePerson = (id, name) => {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      personService\r\n        .deletePerson(id)\r\n        .then(\r\n          props.setPersons(props.persons.filter(person =>\r\n            person.id !== id)),\r\n          props.setSuccess(true),\r\n          props.setMessage(`Deleted ${name}`),\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        )\r\n        .catch(error => {\r\n          props.setSuccess(false)\r\n          props.setMessage(`Information of ${name} has already been removed from server`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {namesToShow.map(person =>\r\n        <p key={person.name}> {person.name} {person.number}\r\n          <button onClick={() =>\r\n            deletePerson(person.id, person.name)}>delete</button></p>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","import React, { useState, useEffect } from 'react'\nimport Filter from './Filter'\nimport PersonForm from './PersonForm'\nimport Persons from './Persons'\n\nimport personService from './services/persons'\n\nconst Notification = (props) => {\n  if (props.message === null) {\n    return null\n  }\n\n  if (props.success === true) {\n    return (\n      <div className='success'>\n        {props.message}\n      </div>\n    )\n  }\n\n  if (props.success === false) {\n    return (\n      <div className='error'>\n        {props.message}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [number, setNumber] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [success, setSuccess] = useState(true)\n\n  const hook = () => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n      .catch(error => {\n        console.log('fail')\n      })\n  }\n  \n  useEffect(hook, [])\n\n  const changeName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const changeNumber = (event) => {\n    setNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value)\n    setShowAll(false)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={message}\n        success={success}\n      />\n      <Filter\n        value={filter}\n        onChange={handleFilter}\n      />\n      <h3>Add a new</h3>\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        newName={newName}\n        setNewName={setNewName}\n        number={number}\n        setNumber={setNumber}\n        changeName={changeName}\n        changeNumber={changeNumber}\n        setMessage={setMessage}\n        setSuccess={setSuccess}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        setPersons={setPersons}\n        showAll={showAll}\n        filter={filter}\n        setMessage={setMessage}\n        setSuccess={setSuccess}\n      />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}