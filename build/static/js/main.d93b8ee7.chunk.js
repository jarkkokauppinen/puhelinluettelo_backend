(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var s=n(16),c=n.n(s),a=n(3),u=n(2),r=n(0),o=function(e){return Object(r.jsxs)("div",{children:["filter shown with:",Object(r.jsx)("input",{value:e.value,onChange:e.onChange})]})},i=n(17),l=n(4),j=n.n(l),b="/api/persons",d=function(){return j.a.get(b)},m=function(e){return j.a.post(b,e)},f=function(e){return j.a.delete("".concat(b,"/").concat(e))},h=function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n,s={name:e.newName,number:e.number},c=Object(i.a)(e.persons);try{for(c.s();!(n=c.n()).done;){var a=n.value;if(e.newName===a.name)a.id}}catch(u){c.e(u)}finally{c.f()}m(s).then((function(t){e.setPersons(e.persons.concat(t.data)),e.setNewName(""),e.setNumber(""),e.setSuccess(!0),e.setMessage("Added ".concat(e.newName)),setTimeout((function(){e.setMessage(null)}),2500)})).catch((function(t){e.setSuccess(!1),e.setMessage(t.response.data.error),setTimeout((function(){e.setMessage(null)}),3500)}))},children:[Object(r.jsxs)("div",{children:["name:",Object(r.jsx)("input",{value:e.newName,onChange:e.changeName}),Object(r.jsx)("br",{}),"number:",Object(r.jsx)("input",{value:e.number,onChange:e.changeNumber})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},O=function(e){var t=e.showAll?e.persons:e.persons.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())}));return Object(r.jsx)("div",{children:t.map((function(t){return Object(r.jsxs)("p",{children:[" ",t.name," ",t.number,Object(r.jsx)("button",{onClick:function(){return n=t.id,s=t.name,void(window.confirm("Delete ".concat(s," ?"))&&f(n).then(e.setPersons(e.persons.filter((function(e){return e.id!==n}))),e.setSuccess(!0),e.setMessage("Deleted ".concat(s)),setTimeout((function(){e.setMessage(null)}),2500)).catch((function(t){e.setSuccess(!1),e.setMessage("Information of ".concat(s," has already been removed from server")),setTimeout((function(){e.setMessage(null)}),2500)})));var n,s},children:"delete"})]},t.name)}))})},g=function(e){return null===e.message?null:!0===e.success?Object(r.jsx)("div",{className:"success",children:e.message}):!1===e.success?Object(r.jsx)("div",{className:"error",children:e.message}):void 0},v=function(){var e=Object(u.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],c=Object(u.useState)(""),i=Object(a.a)(c,2),l=i[0],j=i[1],b=Object(u.useState)(""),m=Object(a.a)(b,2),f=m[0],v=m[1],p=Object(u.useState)(!0),x=Object(a.a)(p,2),w=x[0],N=x[1],S=Object(u.useState)(""),M=Object(a.a)(S,2),C=M[0],y=M[1],P=Object(u.useState)(null),k=Object(a.a)(P,2),A=k[0],T=k[1],D=Object(u.useState)(!0),E=Object(a.a)(D,2),I=E[0],J=E[1];Object(u.useEffect)((function(){d().then((function(e){s(e.data)})).catch((function(e){console.log("fail")}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(g,{message:A,success:I}),Object(r.jsx)(o,{value:C,onChange:function(e){y(e.target.value),N(!1)}}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(h,{persons:n,setPersons:s,newName:l,setNewName:j,number:f,setNumber:v,changeName:function(e){j(e.target.value)},changeNumber:function(e){v(e.target.value)},setMessage:T,setSuccess:J}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(O,{persons:n,setPersons:s,showAll:w,filter:C,setMessage:T,setSuccess:J})]})};n(42);c.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d93b8ee7.chunk.js.map