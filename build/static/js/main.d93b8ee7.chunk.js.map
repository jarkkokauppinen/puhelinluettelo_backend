{"version":3,"sources":["Filter.js","services/persons.js","PersonForm.js","Persons.js","App.js","index.js"],"names":["Filter","props","value","onChange","baseUrl","axios","get","newPerson","post","id","delete","PersonForm","onSubmit","event","preventDefault","name","newName","number","persons","person","personService","then","response","setPersons","concat","data","setNewName","setNumber","setSuccess","setMessage","setTimeout","catch","error","changeName","changeNumber","type","Persons","namesToShow","showAll","filter","toLowerCase","includes","map","onClick","window","confirm","Notification","message","success","className","App","useState","setShowAll","setFilter","useEffect","console","log","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d93b8ee7.chunk.js","sourcesContent":["const Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with:\r\n      <input\r\n      value={props.value}\r\n      onChange={props.onChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n//const baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newPerson => {\r\n  return axios.post(baseUrl, newPerson)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  return axios.put(`${baseUrl}/${id}`, newPerson)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import personService from './services/persons'\r\n\r\nconst PersonForm = (props) => {\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const newPerson = {name: props.newName, number: props.number}\r\n    let add = true\r\n    \r\n    for (const person of props.persons) {\r\n      if (props.newName === person.name) {\r\n        //add = false\r\n        const id = person.id\r\n        //update(newPerson, id)\r\n      }\r\n    }\r\n    \r\n    if (add) {\r\n      personService\r\n        .create(newPerson)\r\n        .then(response => {\r\n          props.setPersons(props.persons.concat(response.data))\r\n          props.setNewName('')\r\n          props.setNumber('')\r\n          props.setSuccess(true)\r\n          props.setMessage(`Added ${props.newName}`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        })\r\n        .catch(error => {\r\n          props.setSuccess(false)\r\n          props.setMessage(error.response.data.error)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 3500)\r\n        })\r\n    }\r\n  }\r\n\r\n  const update = (updatePerson, id) => {\r\n    if (window.confirm(`${props.newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n      personService\r\n        .update(id, updatePerson)\r\n        .then(response => {\r\n          props.setPersons(props.persons.map(person =>\r\n            person.id !== id ? person : response.data))\r\n          props.setNewName('')\r\n          props.setNumber('')\r\n          props.setSuccess(true)\r\n          props.setMessage(`Updated ${props.newName}`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        })\r\n        .catch(error => {\r\n          props.setSuccess(false)\r\n          props.setMessage(`Information of ${props.newName} has already been removed from server`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 5500)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name:\r\n          <input value={props.newName} \r\n          onChange={props.changeName} />\r\n          <br />\r\n          number:\r\n          <input value={props.number}\r\n          onChange={props.changeNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import personService from './services/persons'\r\n\r\nconst Persons = (props) => {\r\n\r\n  const namesToShow = props.showAll\r\n  ? props.persons\r\n  : props.persons.filter(person =>\r\n    person.name.toLowerCase().includes(props.filter.toLowerCase()))\r\n\r\n  const deletePerson = (id, name) => {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      personService\r\n        .deletePerson(id)\r\n        .then(\r\n          props.setPersons(props.persons.filter(person =>\r\n            person.id !== id)),\r\n          props.setSuccess(true),\r\n          props.setMessage(`Deleted ${name}`),\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        )\r\n        .catch(error => {\r\n          props.setSuccess(false)\r\n          props.setMessage(`Information of ${name} has already been removed from server`)\r\n          setTimeout(() => {\r\n            props.setMessage(null)\r\n          }, 2500)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {namesToShow.map(person =>\r\n        <p key={person.name}> {person.name} {person.number}\r\n          <button onClick={() =>\r\n            deletePerson(person.id, person.name)}>delete</button></p>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","import React, { useState, useEffect } from 'react'\nimport Filter from './Filter'\nimport PersonForm from './PersonForm'\nimport Persons from './Persons'\n\nimport personService from './services/persons'\n\nconst Notification = (props) => {\n  if (props.message === null) {\n    return null\n  }\n\n  if (props.success === true) {\n    return (\n      <div className='success'>\n        {props.message}\n      </div>\n    )\n  }\n\n  if (props.success === false) {\n    return (\n      <div className='error'>\n        {props.message}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [number, setNumber] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [success, setSuccess] = useState(true)\n\n  const hook = () => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n      .catch(error => {\n        console.log('fail')\n      })\n  }\n  \n  useEffect(hook, [])\n\n  const changeName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const changeNumber = (event) => {\n    setNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value)\n    setShowAll(false)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={message}\n        success={success}\n      />\n      <Filter\n        value={filter}\n        onChange={handleFilter}\n      />\n      <h3>Add a new</h3>\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        newName={newName}\n        setNewName={setNewName}\n        number={number}\n        setNumber={setNumber}\n        changeName={changeName}\n        changeNumber={changeNumber}\n        setMessage={setMessage}\n        setSuccess={setSuccess}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        setPersons={setPersons}\n        showAll={showAll}\n        filter={filter}\n        setMessage={setMessage}\n        setSuccess={setSuccess}\n      />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}